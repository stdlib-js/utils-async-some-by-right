// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";function a(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var c=s,m=l,f=u.isPrimitive,d=r.isPrimitive,h=i;var p=function(e,t){return c(t)?(m(t,"thisArg")&&(e.thisArg=t.thisArg),m(t,"series")&&(e.series=t.series,!f(e.series))?new TypeError(h("invalid option. `%s` option must be a boolean. Option: `%s`.","series",e.series)):m(t,"limit")&&(e.limit=t.limit,!d(e.limit))?new TypeError(h("invalid option. `%s` option must be a positive integer. Option: `%s`.","limit",e.limit)):null):new TypeError(h("invalid argument. Options argument must be an object. Value: `%s`.",t))},g="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function v(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}var b=v,j=w;function y(e){if(b===setTimeout)return setTimeout(e,0);if((b===v||!b)&&setTimeout)return b=setTimeout,setTimeout(e,0);try{return b(e,0)}catch(t){try{return b.call(null,e,0)}catch(t){return b.call(this,e,0)}}}"function"==typeof g.setTimeout&&(b=setTimeout),"function"==typeof g.clearTimeout&&(j=clearTimeout);var T,E=[],x=!1,O=-1;function A(){x&&T&&(x=!1,T.length?E=T.concat(E):O=-1,E.length&&_())}function _(){if(!x){var e=y(A);x=!0;for(var t=E.length;t;){for(T=E,E=[];++O<t;)T&&T[O].run();O=-1,t=E.length}T=null,x=!1,function(e){if(j===clearTimeout)return clearTimeout(e);if((j===w||!j)&&clearTimeout)return j=clearTimeout,clearTimeout(e);try{j(e)}catch(t){try{return j.call(null,e)}catch(t){return j.call(this,e)}}}(e)}}function P(e,t){this.fun=e,this.array=t}P.prototype.run=function(){this.fun.apply(null,this.array)};function N(){}var L=N,V=N,k=N,D=N,F=N,M=N,C=N;var q=g.performance||{},z=q.now||q.mozNow||q.msNow||q.oNow||q.webkitNow||function(){return(new Date).getTime()};var S=new Date;var J={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];E.push(new P(e,t)),1!==E.length||x||y(_)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:L,addListener:V,once:k,off:D,removeListener:F,removeAllListeners:M,emit:C,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*z.call(q),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-S)/1e3}};module.exports=void 0!==J&&"renderer"===J.type?require("./browser.js"):require("./node.js");var B=a(Object.freeze({__proto__:null}))("some-by-right-async:limit");var G=function(e,t,r,n,i){var o,s,l,u,a,c,m;if(u=e.length,B("Collection length: %d",u),0===u)return B("Finished processing a collection."),i(null,!1);for(l=u<r.limit?u:r.limit,B("Concurrency limit: %d",l),B("Number of arguments: %d",n.length),o=0,a=u,c=0,m=0;m<l;m++)a>0&&f();function f(){B("Collection element %d: %s.",a-=1,JSON.stringify(e[a])),2===n.length?n.call(r.thisArg,e[a],d):3===n.length?n.call(r.thisArg,e[a],a,d):n.call(r.thisArg,e[a],a,e,d)}function d(e,r){if(!s)return e?(s=!0,B("Encountered an error: %s",e.message),i(e)):(B("Processed %d of %d collection elements.",o+=1,u),B("Test result: %s",!!r),r&&!s&&(c+=1)===t?(s=!0,B("Finished processing a collection."),i(null,!0)):a>0?f():o===u?(B("Finished processing a collection."),i(null,!1)):void 0)}},H=t,I=r.isPrimitive,K=n,Q=i,R=o,U=p,W=G;var X=function(e,t){var r,n,i;if(r={},arguments.length>1){if(n=U(r,e))throw n;i=t}else i=e;if(!H(i))throw new TypeError(Q("invalid argument. Last argument must be a function. Value: `%s`.",i));return r.series?r.limit=1:r.limit||(r.limit=R),o;function o(e,t,n){if(!K(e))throw new TypeError(Q("invalid argument. First argument must be a collection. Value: `%s`.",e));if(!I(t))throw new TypeError(Q("invalid argument. Second argument must be a positive integer. Value: `%s`.",t));if(!H(n))throw new TypeError(Q("invalid argument. Last argument must be a function. Value: `%s`.",n));return W(e,t,r,i,(function(e,t){if(e)return n(e,!1);n(null,t)}))}},Y=X;var Z=function(e,t,r,n,i){if(arguments.length<5)return Y(r)(e,t,n);Y(r,n)(e,t,i)},$=X;e(Z,"factory",$);var ee=Z;export{ee as default,$ as factory};
//# sourceMappingURL=index.mjs.map
